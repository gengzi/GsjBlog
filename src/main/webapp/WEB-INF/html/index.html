<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Gengzi-个人博客</title>

    <link rel="shortcut icon" href="favicon.ico"> <link href="css/bootstrap.min.css?v=3.3.6" rel="stylesheet">
    <link href="css/font-awesome.css?v=4.4.0" rel="stylesheet">
    <link href="css/animate.css" rel="stylesheet">
    <link href="css/stylegsj.css?v=4.1.0" rel="stylesheet">
    
    
    <style>
    	#wrapper{
    		/*height:500px;*/
    	}
    	.navbar-header {
		    /* width: 60.5%; */
		}
		#blog_content{
			margin-top: 30px;
		}
		#right_col{
			margin-top: 25%;
			background: white;
			
		}
    	#blog_content_padding{
    		padding-right: 10px;
    		padding-bottom:10px;
    	}
    </style>

</head>

<body class="gray-bg top-navigation">

    <div id="wrapper">
        <div id="page-wrapper" class="gray-bg">
            <div class="row border-bottom white-bg">
                <nav class="navbar navbar-static-top navbar-fixed-top" role="navigation">
                    <div class="navbar-header">
                        <button aria-controls="navbar" aria-expanded="false" data-target="#navbar" data-toggle="collapse" class="navbar-toggle collapsed" type="button">
                            <i class="fa fa-reorder"></i>
                        </button>
                        <a href="#" class="navbar-brand">GengZi</a>
                    </div>
                    <div class="navbar-collapse collapse" id="navbar">
                        <ul class="nav navbar-nav" id="folderlist" >
                          <!--   <li class="dropdown">
                                <a aria-expanded="false" role="button" href="#" class="dropdown-toggle" data-toggle="dropdown"> 菜单 <span class="caret"></span></a>
                                <ul role="menu" class="dropdown-menu">
                                    <li><a href="">菜单列表</a>
                                    </li>
                                    <li><a href="">菜单列表</a>
                                    </li>
                                    <li><a href="">菜单列表</a>
                                    </li>
                                    <li><a href="">菜单列表</a>
                                    </li>
                                </ul>
                            </li>
                         -->
                        </ul>
                        <!-- 登陆后要替换这一块的内容 -->
                        <ul class="nav navbar-top-links navbar-right"> 
                            <li>
                                <a href="login.html"  id="nologin" >
                                    <i class="fa fa-sign-out"></i> 登陆
                                </a>
                                <a href="#" id="infologin" style="display: none;">
                                  
                                </a>
                            </li>
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </div>
    
	<div class="container-fluid">
	  <div class="row">
	  	<div class="col-md-10"> 
	  		<div id="blog_content"  class="gray-bg">
             <div id="blog_content_padding" class="wrapper wrapper-content  animated fadeInRight blog">
		        <div class="row">
		            <div class="col-lg-12" id="articlelist" >
		            
		           <!--  文章 
		                <div class="ibox">
		                    <div class="ibox-content">
		                        <a href="article.html" class="btn-link">
		                        标题
		                            <h2>
		                                   	 想知道宁泽涛每天游多少圈？送他 Misfit 最新款 Speedo Shine
		                            </h2>
		                        </a>
		                        <div class="small m-b-xs">
		                        作者
		                            <strong>高 晨</strong> <span class="text-muted"><i class="fa fa-clock-o"></i> 3 小时前</span>
		                        </div>
		                        文章内容 
		                        <p>
		                           	 就算你敢带着 Apple Watch 下水游泳，它也不能记录你游了多少圈。 夏天刚来时就不停地听到有人提起“有没有在我游泳的时候可以帮忙数圈的设备”，今天 Misfit 终于赶在夏天结束之前推出可追踪游泳运动的新款 Shine。这款新设备是 Misfit 与泳衣品牌 Speedo （速比涛）合作推出，因此被命名为 Speedo Shine。
		                        </p>
		                        <div class="row">
		                            <div class="col-md-6">
		                                <h5>标签：</h5>
		                                
		                                标签
		                                <button class="btn btn-primary btn-xs" type="button">Apple Watch</button>
		                                <button class="btn btn-white btn-xs" type="button">速比涛</button>
		                                标签
		                                
		                                
		                                
		                            </div>
		                            <div class="col-md-6">
		                                <div class="small text-right">
		                                    <h5>状态：</h5>
		                                    
		                                    评论/浏览
		                                    
		                                    <div> <i class="fa fa-comments-o"> </i> 56 评论 </div>
		                                    <i class="fa fa-eye"> </i> 144 浏览
		                                    
		                                    评论/浏览
		                                    
		                                </div>
		                            </div>
		                        </div>
		                    </div>
		                </div>
		                
		              文章 -->
		        
		            </div>
		        </div>
		    </div>
	   		     <!-- 分页按钮 -->
			    <div  class="row" id="uploadbtn" >
			    	<div class="col-md-5 col-md-offset-3" style="margin-bottom:15px;">  
				    		<a id="nextclick"  class="btn btn-primary btn-rounded btn-block">
				    			<i class="fa fa-info-circle"></i>加载更多...
				    		</a>
			    	</div>
			    </div>
		    </div>
	  	</div>
  		<div class="col-md-2"> 
  			<div class="ibox float-e-margins  wrapper wrapper-content " style="padding-top: 23px;padding-left: 1px;padding-right: 1px;">
                    <div  id="right_col"  class="ibox-content mailbox-content ">
                        <div class="file-manager">
           				  <div class="space-16"></div>
                            <h5>博客</h5>
                            <ul class="folder-list m-b-md" style="padding: 0" id="blogtypelist">
                             <!-- 博客分类 
                                <li>
                                    <a href="mailbox.html"> <i class="fa fa-inbox "></i> Java<span class="label label-warning pull-right">16</span>
                                    </a>
                                </li>
                              <li>
                                    <a href="mailbox.html"> <i class="fa fa-envelope-o"></i> JS/Html</a>
                                </li>
                                <li>
                                    <a href="mailbox.html"> <i class="fa fa-certificate"></i> 数据库</a>
                                </li>
                                <li>
                                    <a href="mailbox.html"> <i class="fa fa-file-text-o"></i> Python<span class="label label-danger pull-right">2</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="mailbox.html"> <i class="fa fa fa-files-o"></i> 开发软件</a>
                                </li> -->
                            </ul>
                            <h5>分类</h5>
                            <ul class="category-list" style="padding: 0">
                                <li>
                                    <a href="mail_compose.html#"> <i class="fa fa-circle text-navy"></i> 工作记录</a>
                                </li>
                                <li>
                                    <a href="mail_compose.html#"> <i class="fa fa-circle text-danger"></i> 技术文档</a>
                                </li>
                                <li>
                                    <a href="mail_compose.html#"> <i class="fa fa-circle text-primary"></i> 书籍</a>
                                </li>
                                <li>
                                    <a href="mail_compose.html#"> <i class="fa fa-circle text-info"></i> 转载博客</a>
                                </li>
                            </ul>

                            <h5 class="tag-title">标签</h5>
                            <ul class="tag-list" style="padding: 0"  id="tagslist">
                               <!--    <li><a href="mail_compose.html"><i class="fa fa-tag"></i> java</a>
                                </li>
                                <li><a href="mail_compose.html"><i class="fa fa-tag"></i> 数据库</a>
                                </li>
                                <li><a href="mail_compose.html"><i class="fa fa-tag"></i> Eclipse</a>
                                </li>
                                <li><a href="mail_compose.html"><i class="fa fa-tag"></i> 页面</a>
                                </li>
                                <li><a href="mail_compose.html"><i class="fa fa-tag"></i> tomcat</a>
                                </li>
                                <li><a href="mail_compose.html"><i class="fa fa-tag"></i> 设计</a>
                                </li>
                                <li><a href="mail_compose.html"><i class="fa fa-tag"></i> 图片</a>
                                </li>
                                <li><a href="mail_compose.html"><i class="fa fa-tag"></i> python</a>
                                </li> -->
                            </ul>
                            <div class="clearfix"></div>
                        </div>
                    </div>
                </div>
  		</div>
	  </div>
	</div>
	
	<div>
		<input type="hidden"  id="blogtype" value="全部" >
		<input type="hidden"  id="tagtype" value="全部" >
		<input type="hidden"  id="nextpage" value="1">
	</div>




    <!-- 全局js -->
    <script src="js/jquery.min.js?v=2.1.4"></script>
    <script src="js/bootstrap.min.js?v=3.3.6"></script>



    <!-- 自定义js -->
    <script src="js/content.js?v=1.0.0"></script>


    <!-- Flot -->
    <script src="js/plugins/flot/jquery.flot.js"></script>
    <script src="js/plugins/flot/jquery.flot.tooltip.min.js"></script>
    <script src="js/plugins/flot/jquery.flot.resize.js"></script>

    <!-- ChartJS-->
    <script src="js/plugins/chartJs/Chart.min.js"></script>

    <!-- Peity -->
    <script src="js/plugins/peity/jquery.peity.min.js"></script>

    <!-- Peity demo -->
    <script src="js/demo/peity-demo.js"></script>
    
    <!-- cookie  -->
    <script src="js/plugins/cookie/jquery.cookie.js"></script>


   <script type="text/javascript" src="http://tajs.qq.com/stats?sId=65495710" charset="UTF-8"></script>
    <!--统计代码，可删除-->
    
    
    <script type="text/javascript">
    /*初始化博客分类  */
	var blogtypeurl = "folder/blogtype";
	$.ajax({
		  url: blogtypeurl,
		  type: "GET",
		  dataType: "json",
		  success:function(data){
			 for (var i = 0; i < data.length; i++) {
				 //danger "'+data[i].name+'"  onclick="blogTypeShow() " href="javascript:void(0)"
				 $("#blogtypelist").append('<li><a href="javascript:void(0)" onclick="blogTypeShow(\"java\")"  ><i class="fa fa-inbox "></i> '+data[i].name+'<span class="label label-warning pull-right">'+data[i].blogtypenum+'</span></a></li>');				 

			 }
			 // 由于append出现问题，所以采用这种方式，重新注入 onclick 方法
			 var lista = $("#blogtypelist a");
			 for (var i = 0; i < lista.length; i++) {
				 $(lista[i]).attr("onclick","blogtypeclick(\""+data[i].name+"\")");
			  }
		  }
	
		});
    </script>
    
	 <script type="text/javascript">
    	/*博客分类的点击事件  */
    	//下一页的点击事件
    	blogtypeclick = function(blogtype){
    		
       		/*初始化文章 */
       		var nextindexurl = "article/"+blogtype+"/全部/1/10";
       		$.ajax({
         		  url: nextindexurl,
         		  type: "GET",
     			  dataType: "json",
     			  success:function(data){
     				 $("#articlelist").empty();
     				  showArictleInfo(data);
     				  // 设置点击下一页的条件
     				  $("#blogtype").val(blogtype);
     				  $("#tagtype").val("全部");
     				  
     			  }
     			});
    	}
    </script> 
    
    <script type="text/javascript">
    	/*初始化目录菜单  */
    	var indexurl = "folder/index";
    	$.ajax({
    		  url: indexurl,
    		  type: "GET",
			  dataType: "json",
			  success:function(data){
			  	//解析
			  	for (var i = 0; i < data.length; i++) {
			  		$("#folderlist").append(' <li class="dropdown"><a aria-expanded="false" role="button" href="#" class="dropdown-toggle" data-toggle="dropdown">'+data[i].name+'<span class="caret"></span></a><ul id="folder'+i+'" role="menu" class="dropdown-menu"> </ul></li>');
			  		var subdata = data[i].subsetlist;
			  		for (var j = 0; j < subdata.length; j++) {
			  			$("#folder"+i).append('<li><a id="'+i+'">'+subdata[j].name+'</a></li>');
					}
				}
			  }
			});
    </script>
    
    
    
    <script type="text/javascript">
    
    	//根据数据渲染页面
    	function showArictleInfo(data){
    		//设置下一页
    		var nextpage = data.nextPage;
    		if (nextpage>0) {
    			$("#nextpage").val(data.nextPage);	
    			// 当下一页存在，就显示下一页按钮
    			$("#uploadbtn").show();
			}else{
				$("#nextpage").val("-1");
				// 当下一页存在，就隐藏下一页按钮
				$("#uploadbtn").hide();
			}
    	   //设置文章内容
    		var articlelist = data.list;
    		for (var i = 0; i < articlelist.length; i++) {
    			var content = articlelist[i].content;
    			if (content == null ) {
    				content = articlelist[i].title+"<br><br><br>";
				}
				// 将content缩短    			
    			if(content != null){
    				// 剔除所有的img标签
    				content = content.replace(/<\s?img[^>]*>/gi,'');
    				content = content.substring(0,300)+"...<br>点击查看详情<br>"
    			} 			
    			
    			$("#articlelist").append('<div class="ibox">'+
    										'<div class="ibox-content">'+
    											'<a href="article/'+articlelist[i].id+'" target="_Blank"  class="btn-link"><h2>'+articlelist[i].title+'</h2></a>'+
    												'<div class="small m-b-xs"><strong>'+articlelist[i].publishUser+'</strong>'+
    												'<span class="text-muted"><i class="fa fa-clock-o"></i>'+articlelist[i].publishTime+'</span></div>'+
    												''+content+''+
    												'<div class="row"><div class="col-md-6" id="'+articlelist[i].id+'"><h5>标签：</h5> </div>'+
    												'<div class="col-md-6"><div class="small text-right"><h5>状态：</h5><div> '+
    												'<i class="fa fa-comments-o"> </i>'+articlelist[i].countComment+'评论 </div><i class="fa fa-eye"> </i>'+articlelist[i].countView+'浏览</div>'+
    												' </div></div></div></div></div>'
    												);			
    			var tags = articlelist[i].tags;
	    			for (var j = 0; j < tags.length; j++) {
	    				$("#"+tags[j].articleId).append('<button class="btn btn-white btn-xs" type="button">'+tags[j].tagname+'</button>');
					}
	    		/* 	
	    			//判断那个div高度小于200 就增加到200
		    		var parentdiv = $("#"+articlelist[i].id).parent();
		    		if($(parentdiv).height() <120){
		    			$(parentdiv).height("150");
		    		} */
			}
    	}
    	
    	/*初始化文章 */
    	var indexurl = "article/全部/全部/1/10";
    	$.ajax({
    		  url: indexurl,
    		  type: "GET",
			  dataType: "json",
			  success:function(data){
				  showArictleInfo(data);
			  }
			});
    </script>
    
    <script type="text/javascript">
    	//下一页的点击事件
    	$("#nextclick").click(function(){
    		//获取查询条件和下一页的页码
    		var blogtype = $("#blogtype").val();
    		var tagtype = $("#tagtype").val();
    		var nextpage = $("#nextpage").val();
    		//执行ajax请求
    		/*初始化文章 */
    		var nextindexurl = "article/"+blogtype+"/"+tagtype+"/"+nextpage+"/10";
    		$.ajax({
      		  url: nextindexurl,
      		  type: "GET",
  			  dataType: "json",
  			  success:function(data){
  				  showArictleInfo(data);
  			  }
  			});
    	});
    </script>
    
    
    <script type="text/javascript">
			/* blogTypeShow  = function (this){
	    		alert($(this).html());
				var nextindexurl = "article/"+blogname+"/全部/1/10";
				$.ajax({
		  		  url: nextindexurl,
		  		  type: "GET",
					  dataType: "json",
					  success:function(data){
						  showArictleInfo(data);
					  }
					});
	    	} */
    </script>
    
    
    <script type="text/javascript">
		//查询常用的标签
    	var tagsurl = "tags/only";
	    $.ajax({
			  url: tagsurl,
			  type: "GET",
			  dataType: "json",
			  success:function(data){
				 for (var i = 0; i < data.length; i++) {
					  $("#tagslist").append('<li><a href="javascript:void(0)" onclick="#" ><i class="fa fa-tag"></i> '+data[i].tagName+'</a></li>');
				 }
			      // 由于append出现问题，所以采用这种方式，重新注入 onclick 方法
				 var listtags = $("#tagslist a");
				 for (var i = 0; i < listtags.length; i++) {
					 $(listtags[i]).attr("onclick","tagsType(\""+data[i].tagName+"\")");
				  }
			  }
			});	
	    
	    
	    
	    // tags a 标签的点击事件
	    tagsType = function(tagstype){
	    	/*初始化文章 */
       		var nexttagsurl = "article/全部/"+tagstype+"/1/10";
       		$.ajax({
         		  url: nexttagsurl,
         		  type: "GET",
     			  dataType: "json",
     			  success:function(data){
     				 $("#articlelist").empty();
     				  showArictleInfo(data);
     				  // 设置点击下一页的条件
     				  $("#blogtype").val("全部");
     				  $("#tagtype").val(tagstype);
     			  }
     			});
	    } 
    </script>
    
    
    <script type="text/javascript">
    	//  进入此页面就判断是否登陆
    	//拿到cookie 对应的值
    	var gsjcookieval  = $.cookie('gsjcookie');
    	if(gsjcookieval !=null){
    		//存在cookie,就去请求后台
    		logined(gsjcookieval);
    		
    	}else{
			//不存在该cookie
			
			
		}
    	
    	//获取登陆信息
    	function logined(gsjcookie_val){
	    	var cookieurl = "user/logininfo/"+gsjcookie_val;
	    	$.ajax({
	         		  url: cookieurl,
	         		  type: "GET",
	     			  dataType: "json",
	     			  success:function(data){
	     				 //解析data
	     				 $("#nologin").css({ display:"none"});
	     				 $("#infologin").css({ display:""});
	     				 $("#infologin").append(' <i class="fa fa-user"></i> '+data.username+'');
	     			  }
	     			});
    	}
    </script>
    

</body>

</html>
